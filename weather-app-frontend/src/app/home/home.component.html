<div *ngIf="!loading">
    <div class="jumbotron container container-md">
        <h1>
            <p>{{ 'Welcome To Online Weather Forecasting Application'}}</p>
        </h1>
    </div>



    <div class="com">
        <div class="row">
            <span class="p-float-label" style="margin-left: 2%; margin-bottom: 2%;">

                <input pInputText id="city" [(ngModel)]="selectedCity" placeholder="Search city by name" />
                <label htmlFor="city">City Name</label>
            </span>
            <span style="margin-left: 2%;"> <p-button (click)="submitCityName($event)" label="Search"
                    styleClass="p-button-secondary"></p-button></span>

        </div>
        <div class="row" *ngIf="cityList.length>0">
    
            <p-table #dt1 [value]="cityList" dataKey="id" [rows]="10" 
                (onRowSelect)="onCityTableRowSelect($event)" selectionMode="single"
                [(selection)]="selectedLocation"
                [rowsPerPageOptions]="[10]" [loading]="loading" [paginator]="true"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                [globalFilterFields]="['country', 'name', 'timezone', 'latitude', 'longitude',  'country_code', 'feature_code']"
                style="border: 1px solid gray;"
                >
                <ng-template pTemplate="caption">
                    <div class="flex">
                       <h3> Geo Location Table</h3>
                    </div>
                    </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th > 
                            <div class="flex align-items-center">
                                Country
                                <p-columnFilter type="text" field="country" matchMode="contains"></p-columnFilter>
                            </div>
                        </th>
                        <th > 
                            <div class="flex align-items-center">
                                Name 
                                <p-columnFilter type="text" field="name" matchMode="contains"></p-columnFilter>
                            </div>
                        </th>

                        <th> 
                            <div class="flex align-items-center">
                                Timezone
                                <p-columnFilter type="text" field="timezone" matchMode="contains"></p-columnFilter>
                            </div>
                        </th>

                        <th> 
                            <div class="flex align-items-center">
                                Latitude
                                <p-columnFilter type="numeric" field="latitude" matchMode="equal"></p-columnFilter>
                            </div>
                        </th>
                        <th> 
                            <div class="flex align-items-center">
                                Longitude
                                <p-columnFilter type="numeric" field="longitude" matchMode="lte"></p-columnFilter>
                            </div>
                        </th>
                        <th> 
                            <div class="flex align-items-center">
                                Country Code
                                <p-columnFilter type="text" field="country_code" matchMode="contains"></p-columnFilter>
                            </div>
                        </th>
                        <th> 
                            <div class="flex align-items-center">
                                Feature Code
                                <p-columnFilter type="text" field="feature_code" matchMode="contains"></p-columnFilter>
                            </div>
                        </th>

                    </tr>
                </ng-template>

                <!-- ******************* main data body ************************* -->
                <ng-template pTemplate="body" let-city let-index="rowIndex">
                    <tr [pSelectableRow]="city" [pSelectableRowIndex]="index">
                        <td>
                            {{ city.country }}
                        </td>
                   
                        <td>
                            {{ city.name }}
                        </td>
                
                        <td>
                            {{ city.timezone }}
                        </td>
                   
                        <td>
                            {{ city.latitude }}
                        </td>
                
                        <td>
                            {{ city.longitude }}
                        </td>
                 
                        <td>
                            {{ city.country_code }}
                        </td>
                   
                        <td>
                            {{ city.feature_code }}
                        </td>
                    </tr>
                    
                </ng-template>


                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="7">No records found.</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>

    </div>
</div>


<app-loading-spinner *ngIf="loading"></app-loading-spinner>


